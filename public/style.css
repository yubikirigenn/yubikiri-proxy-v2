/* --- テーマ変数定義 --- */
:root { /* ダークテーマ */
  --bg-gradient: linear-gradient(135deg, #23074d 0%, #cc5333 100%);
  --text-color: #eee; --placeholder-color: #aaa; --title-color: #fff;
  --panel-bg: rgba(30, 30, 30, 0.5); --panel-border-color: rgba(255, 255, 255, 0.1);
  --element-bg: rgba(0, 0, 0, 0.25); --element-border-color: rgba(255, 255, 255, 0.2);
  --element-hover-bg: rgba(0, 0, 0, 0.4); --element-text-color: #eee;
  --top-bar-bg: rgba(30, 30, 30, 0.5); --top-bar-border-color: rgba(255, 255, 255, 0.1);
  --shadow-color: rgba(0, 0, 0, 0.3);
}
body.light-theme { /* ライトテーマ */
  --bg-gradient: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
  --text-color: #1c1e21; --placeholder-color: #666; --title-color: #0d47a1;
  --panel-bg: rgba(255, 255, 255, 0.4); --panel-border-color: rgba(255, 255, 255, 0.3);
  --element-bg: rgba(255, 255, 255, 0.6); --element-border-color: rgba(0, 0, 0, 0.1);
  --element-hover-bg: rgba(255, 255, 255, 0.9); --element-text-color: #1c1e21;
  --top-bar-bg: rgba(255, 255, 255, 0.4); --top-bar-border-color: rgba(255, 255, 255, 0.3);
  --shadow-color: rgba(0, 0, 0, 0.1);
}

/* --- 基本スタイル --- */
body { margin: 0; font-family: 'Segoe UI', sans-serif; color: var(--text-color); background-image: var(--bg-gradient); background-attachment: fixed; background-size: cover; }

/* --- トップページ --- */
#top-large { text-align: center; margin-top: 100px; transition: opacity 0.3s, display 0.3s; }
#top-large h1 { font-size: 64px; margin-bottom: 40px; color: var(--title-color); text-shadow: 0 3px 6px var(--shadow-color); }

/* ★★★ ここからが、ボタン類をガラスにするための修正です ★★★ */

/* ガラス要素の共通スタイル (ボタン, 入力欄, スイッチ) */
.glass-element {
  background: var(--element-bg);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid var(--element-border-color);
  border-radius: 8px;
  transition: all 0.2s ease;
  box-shadow: 0 4px 12px var(--shadow-color);
  color: var(--element-text-color);
}
.glass-element:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 15px var(--shadow-color);
  background: var(--element-hover-bg);
  border-color: var(--panel-border-color);
}
.glass-element:active {
  transform: translateY(1px);
  box-shadow: inset 0 2px 4px var(--shadow-color); /* クリック時に内側に影 */
  transition-duration: 0.05s;
}
.glass-element::placeholder {
  color: var(--placeholder-color);
}


/* トップページの入力欄とボタンのサイズ・フォントを指定 */
#top-large input { width: 400px; padding: 12px; font-size: 18px; }
#top-large button { padding: 12px 20px; font-size: 18px; font-weight: bold; cursor: pointer; margin-left: 8px; }


/* --- 上部バー --- */
#top-small { position: fixed; top: -80px; left: 0; width: 100%; display: flex; justify-content: center; align-items: center; padding: 12px 0; box-sizing: border-box; transition: top 0.3s ease; z-index: 1000;
  background: var(--top-bar-bg);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border-bottom: 1px solid var(--top-bar-border-color);
  box-shadow: 0 8px 32px 0 var(--shadow-color);
}
.top-small-content { display: flex; width: 90%; max-width: 800px; gap: 8px; align-items: center; }

/* ★★★★★ これが正しい修正です ★★★★★ */
#top-small input {
  flex: 1;
  height: 36px;
  padding: 0 12px;
  font-size: 16px;
  color: #1c1e21;
}

/* ダークテーマの時だけ、#top-small input の文字色を #fff に上書きする */
/* body:not(.light-theme) は「light-themeクラスが付いていないbody」= ダークテーマ を意味する */
body:not(.light-theme) #top-small input {
    color: #fff;
}
#top-small button { height: 36px; padding: 0 16px; font-size: 16px; font-weight: bold; cursor: pointer; }


/* --- テーマスイッチ --- */
.theme-switch { position: relative; width: 50px; height: 26px; cursor: pointer; z-index: 1001; flex-shrink: 0; border-radius: 13px; }
.theme-switch-slider { position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background-color: var(--text-color); border-radius: 50%; transition: transform 0.3s, background-color 0.3s; }
body.light-theme .theme-switch-slider { transform: translateX(24px); }
.theme-switch-top { position: fixed; top: 16px; right: 16px; transition: opacity 0.3s; }
.theme-switch-top.hidden { opacity: 0; pointer-events: none; }


/* --- コンテンツ表示エリア --- */
#content { position: fixed; top: 0; left: 0; height: 100vh; width: 100%; box-sizing: border-box; visibility: hidden; opacity: 0; transition: opacity 0.3s ease; z-index: 900; }
#content.visible { visibility: visible; opacity: 1; }
#content > div { width: 100%; height: 100%; border: none; background: #fff; overflow: auto; }
.version-label { position: fixed; bottom: 10px; right: 14px; font-size: 14px; color: rgba(255, 255, 255, 0.5); text-shadow: 0 1px 2px rgba(0,0,0,0.5); pointer-events: none; user-select: none; z-index: 1002; }
body.light-theme .version-label { color: rgba(0, 0, 0, 0.4); text-shadow: none; }

/* ========================================================== */
/*  ダークテーマ時の上部URLバーの視認性向上（最優先スタイル）  */
/* ========================================================== */

/* 「light-themeクラスが付いていないbody」= ダークテーマ の時だけ適用 */
body:not(.light-theme) #top-small input#url-input-small {
    /* 背景色を、半透明ではない、完全な白に強制上書き */
    background: #ffffff;
    
    /* 文字色を、完全な黒に強制上書き */
    color: #000000;
    
    /* 枠線も分かりやすくする */
    border-color: #999;
}

/* プレースホルダー（入力前の文字）も黒にする */
body:not(.light-theme) #top-small input#url-input-small::placeholder {
    color: #333;
}